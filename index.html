<!DOCTYPE html>
<html lang="en" data-framework="marionettejs">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Tracktion</title>

	<!-- CSS -->
	<link href="libs/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/main.css" />

</head>
<body style="zoom: 1;">
  <!-- navbar -->
	<nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Tracktion</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

  <div class="activityInfoDropdown dropdown">
    <a href="#" data-toggle="dropdown" class="dropdown-toggle">Show ActivityInfo</a>
    <ul class="dropdown-menu">
      <li>
        <p align="center">Duration (m)</p>
        <input id="durationInput" class="numeric-only">
        <p align="center">Activity Type:</p>
        <!-- <input id="activityTypeInput"> --> <!-- autocomplete -->
        <!-- <ul id="activityTypeMenu"></ul> --> <!-- menu -->
        <select id="activityTypeSelect" name="activityTypeSelect"></select>
        <div>
          <button id="submitActivityInfo" class="btn btn-default">Okay</button>
        </div>
      </li>
    </ul>
  </div>

  <button id="showActivityInfoBtn">Show activity info from elsewhere (not working)</button>

  <!-- weeks view -->
  <div id="weeks"></div>

  <!-- templates -->
  <script type="text/template" id="weekTpl">
    <svg class="week">
        <line x1="0" y1="0" x2="999999" y2 = "0"stroke="green" stroke-width="4"/>
      <g class="week-label" transform="translate(750, 100) rotate(90)">
        <text style="text-anchor: middle;">Week <%= weekNumber() %></text>
      </g>
      <g class="cumulative">
      <% _.each(reversedDays(), function(d, i) { %>
        <!-- It would be more logical to put the vertices on the lines between
             days, so that two consecutive vertices will straddle the day that
             reflects the difference between them, but I think this is
             outweighed by the downside of more of the cumulative line graph
             being hidden by the bars. -->
        <g transform="translate(100, <%= DAY_HEIGHT_PX * (i + 1/2) %>)">
          <% if(i > 0) { %>
            <line class="cumulative" x1="<%= rm2p(cumulative(d+1)) %>" x2="<%= rm2p(cumulative(d)) %>" y1="<%= -DAY_HEIGHT_PX %>" y2="0" />
          <% } else { %>
            <line class="cumulative" x1="<%= rm2p(cumulative(d)) %>" x2="<%= rm2p(cumulative(d)) %>" y1="<%= -DAY_HEIGHT_PX/2 %>" y2="0" />
          <% } %>
        </g>
      <% }) %>
      </g>
      <g class="goal" />
      <g class="days">
      <% _.each(reversedDays(), function(d, i) { %>
        <g transform="translate(0, <%= i * DAY_HEIGHT_PX + 1 %>)" class="day">
          <!-- background for row hover -->
          <rect class="background" height="<%= DAY_HEIGHT_PX %>" width="800" />
          <g transform="translate(100, 0)" class="sessions">
            <!-- cumulative fill -->
            <!-- IMO, filling under the cumulative graph is misleading because
                 the area under it doesn't have any meaning. -->
            <!--<rect class="cumulative" height="<%= DAY_HEIGHT_PX %>" width="<%= rm2p(cumulative(d)) %>" />-->
            <circle class="cumulative" cy="<%= DAY_HEIGHT_PX/2 %>" cx="<%= rm2p(cumulative(d)) %>" r="5" />
            <!--
            <text class="cumulative" y="<%= DAY_HEIGHT_PX/2 %>" x="<%= rm2p(cumulative(d)) + 20 %>" dy=".35em"><%= cumulative(d) %></text>
            -->

            <!-- activity slots -->
            <% _.each(daySessions(d), function(session, j){ %>
                <rect class="session" height="<%= DAY_HEIGHT_PX-1 %>" width="<%= rm2p(attr(session, 'duration')) - 1 %>" x="<%= rm2p(daySum(d, j)) %>" data-cid="<%= session.cid %>"  />
            <% }) %>
            <% if(emptyDay(d)){ %>
              <!-- lazy boy -->
            <% } %>
            <!-- new session button and sum text -->
            <g transform="translate(<%= rm2p(daySum(d)) %>, 0)">
              <rect class="new-session" height="<%= DAY_HEIGHT_PX-1 %>" width="<%= DAY_HEIGHT_PX-1 %>" data-day="<%= d %>" />
              <line class="new-session" x1="<%= DAY_HEIGHT_PX/2 %>" x2="<%= DAY_HEIGHT_PX/2 %>" y1="<%= 1/6*DAY_HEIGHT_PX %>" y2="<%= 5/6*DAY_HEIGHT_PX %>" />
              <line class="new-session" y1="<%= DAY_HEIGHT_PX/2 %>" y2="<%= DAY_HEIGHT_PX/2 %>" x1="<%= 1/6*DAY_HEIGHT_PX %>" x2="<%= 5/6*DAY_HEIGHT_PX %>" />
              <text x="49" y="<%= DAY_HEIGHT_PX/2 %>" dy=".35em" class="day-sum"><%= daySum(d) %></text>
            </g>
          </g>
          <text x="10" y="<%= DAY_HEIGHT_PX/2 %>" dy=".35em" class="day"><%= day(d).format("MMMM DD")%></text>
        </g>
      <% }) %>
      <line x1="100" x2="100" y1="0" y2="<%= 7*DAY_HEIGHT_PX %>" class="separator" />
      </g>
    </svg>
  </script>

  <!-- libraries -->
  <!-- <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script> -->
  <!-- <script src="libs/todomvc-common/base.js"></script> -->
  <script src="libs/jquery/jquery-1.11.2.min.js"></script>
  <!-- <script src="libs/jquery/jquery-ui-1.10.0.custom.min.js"></script> -->
  <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
  <script src="libs/bootstrap/js/bootstrap.min.js"></script>
  <script src="libs/underscore/underscore.js"></script>
  <script src="libs/backbone/backbone.js"></script>
  <script src="libs/backbone.localstorage/backbone.localStorage.js"></script>
  <script src="libs/backbone.marionette/lib/backbone.marionette.js"></script>
  <script src="libs/moment/moment.min.js"></script>

  <!-- custom JS -->
  <script type="text/javascript" src="js/model.js"></script>
</body>
</html>
